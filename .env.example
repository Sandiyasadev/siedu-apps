# ============================================
# Siedu Monorepo - Environment Configuration
# Copy this file to .env and adjust values
# Used by: docker-compose.yml, docker-compose.dev.yml
# ============================================

# ---- Mode ----
NODE_ENV=development

# ---- Database ----
# Local dev:   postgres://postgres:postgres@db:5432/appdb
# Production:  postgres://postgres.xxxx:PASS@pooler.supabase.com:6543/postgres
DATABASE_URL=postgres://postgres:postgres@db:5432/appdb

# ---- JWT ----
# Generate: openssl rand -hex 32
JWT_SECRET=change-me-in-production
JWT_EXPIRES_IN=7d

# ---- Internal API Key (API <-> n8n) ----
# Generate: openssl rand -hex 24
INTERNAL_API_KEY=change-me-in-production

# ---- AWS S3 / MinIO Storage ----
# Local dev uses MinIO (set by docker-compose.dev.yml)
# Production uses AWS S3:
MINIO_ENDPOINT=s3.ap-southeast-3.amazonaws.com
MINIO_PORT=443
MINIO_USE_SSL=true
MINIO_ACCESS_KEY=YOUR_AWS_ACCESS_KEY_ID
MINIO_SECRET_KEY=YOUR_AWS_SECRET_ACCESS_KEY
MINIO_BUCKET=chat-backend-storage
AWS_REGION=ap-southeast-3

# ---- n8n ----
# Generate encryption key: openssl rand -hex 24
# ⚠️ BACKUP THIS KEY! Without it, n8n credentials cannot be decrypted.
N8N_ENCRYPTION_KEY=
N8N_PUBLIC_URL=https://n8n.siedu.web.id
N8N_WEBHOOK_BASE=http://n8n:5678/webhook

# ---- CORS (frontend URL) ----
CORS_ORIGIN=http://localhost:5173

# ---- Public API URL ----
PUBLIC_API_URL=http://localhost:8080

# ---- Ports (optional override) ----
API_PORT=8080

# ---- Frontend Deploy (used by deploy.sh) ----
# S3_FRONTEND_BUCKET=siedu-dashboard
# CLOUDFRONT_DISTRIBUTION_ID=E1XXXXXX
# VITE_API_BASE=https://api.siedu.web.id
